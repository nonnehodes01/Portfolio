<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Opdracht 7: Relationele data en databases | _main.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Opdracht 7: Relationele data en databases | _main.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Opdracht 7: Relationele data en databases | _main.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="opdracht-6-output-pages.html"/>
<link rel="next" href="opdracht-8-een-r-package-bouwen.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Portfolio</a></li>
<li class="chapter" data-level="" data-path="opdracht-1-reproduceerbaar-onderzoek.html"><a href="opdracht-1-reproduceerbaar-onderzoek.html"><i class="fa fa-check"></i>Opdracht 1: Reproduceerbaar onderzoek</a>
<ul>
<li class="chapter" data-level="" data-path="opdracht-1-reproduceerbaar-onderzoek.html"><a href="opdracht-1-reproduceerbaar-onderzoek.html#c.-elegans-plaatexperiment"><i class="fa fa-check"></i>1.1: C. elegans plaatexperiment</a></li>
<li class="chapter" data-level="" data-path="opdracht-1-reproduceerbaar-onderzoek.html"><a href="opdracht-1-reproduceerbaar-onderzoek.html#open-science"><i class="fa fa-check"></i>1.2: Open science</a>
<ul>
<li class="chapter" data-level="" data-path="opdracht-1-reproduceerbaar-onderzoek.html"><a href="opdracht-1-reproduceerbaar-onderzoek.html#deel-1-open-collegiale-toetsing"><i class="fa fa-check"></i>Deel 1: Open collegiale toetsing</a></li>
<li class="chapter" data-level="" data-path="opdracht-1-reproduceerbaar-onderzoek.html"><a href="opdracht-1-reproduceerbaar-onderzoek.html#deel-2-reproduceerbaarheid-van-artikelen-gepubliceerd-onder-het-open-databeleid"><i class="fa fa-check"></i>Deel 2: reproduceerbaarheid van artikelen gepubliceerd onder het open databeleid</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="opdracht-2-gegevensbeheer.html"><a href="opdracht-2-gegevensbeheer.html"><i class="fa fa-check"></i>Opdracht 2: Gegevensbeheer</a></li>
<li class="chapter" data-level="" data-path="opdracht-3-gebruik-van-git-en-github.html"><a href="opdracht-3-gebruik-van-git-en-github.html"><i class="fa fa-check"></i>Opdracht 3: Gebruik van Git en Github</a>
<ul>
<li class="chapter" data-level="" data-path="opdracht-3-gebruik-van-git-en-github.html"><a href="opdracht-3-gebruik-van-git-en-github.html#cv"><i class="fa fa-check"></i>3.1: CV</a></li>
<li class="chapter" data-level="" data-path="opdracht-3-gebruik-van-git-en-github.html"><a href="opdracht-3-gebruik-van-git-en-github.html#een-nieuwe-vaardigheid"><i class="fa fa-check"></i>3.1: Een nieuwe vaardigheid</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="opdracht-5-gebruik-van-zotero.html"><a href="opdracht-5-gebruik-van-zotero.html"><i class="fa fa-check"></i>Opdracht 5: Gebruik van Zotero</a></li>
<li class="chapter" data-level="" data-path="opdracht-6-output-pages.html"><a href="opdracht-6-output-pages.html"><i class="fa fa-check"></i>Opdracht 6: Output pages</a></li>
<li class="chapter" data-level="" data-path="opdracht-7-relationele-data-en-databases.html"><a href="opdracht-7-relationele-data-en-databases.html"><i class="fa fa-check"></i>Opdracht 7: Relationele data en databases</a></li>
<li class="chapter" data-level="" data-path="opdracht-8-een-r-package-bouwen.html"><a href="opdracht-8-een-r-package-bouwen.html"><i class="fa fa-check"></i>Opdracht 8: Een R package bouwen</a></li>
<li class="chapter" data-level="" data-path="opdracht-9-rmarkdown-parameters.html"><a href="opdracht-9-rmarkdown-parameters.html"><i class="fa fa-check"></i>Opdracht 9: RMarkdown parameters</a>
<ul>
<li class="chapter" data-level="" data-path="opdracht-9-rmarkdown-parameters.html"><a href="opdracht-9-rmarkdown-parameters.html#covid-19-rapport-zonder-parametrisering"><i class="fa fa-check"></i>9.1: COVID-19-rapport zonder parametrisering</a></li>
<li class="chapter" data-level="" data-path="opdracht-9-rmarkdown-parameters.html"><a href="opdracht-9-rmarkdown-parameters.html#covid-19-rapport-met-parametrisering"><i class="fa fa-check"></i>9.2: COVID-19-rapport met parametrisering</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="opdracht-7-relationele-data-en-databases" class="section level1 hasAnchor">
<h1>Opdracht 7: Relationele data en databases<a href="opdracht-7-relationele-data-en-databases.html#opdracht-7-relationele-data-en-databases" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In deze opdracht is er gewerkt met SQL. Er waren verschillende datasets beschikbaar die bewerkt moesten worden met SQL, ik heb dit gedaan aan de hand van dbeaver. DBeaver is een databaseclient voor het beheren en queryen van databases.De datasets moesten worden opgechoond en opgeslagen als csv en rds bestanden. tot slot moest er bij de opdracht een kort verslag geschreven worden, die zal beginnen vanaf het kopje “inleiding” als je verder leest.</p>
<p><strong>Inleiding</strong></p>
<p>In dit verslag wordt een samenvatting gegeven van een data-analyse en visualisatie opdracht. deze opdracht is uitgevoerd met behulp van R (in rStudio) en PostgreSQl (in dbeaver). in deze opdracht werden er verschillende datasets verkend, opgeschoond en geanalyseert. De datasetst hadden gegevens met betrekking tot griep, dengue en demografische indicatoren van verschillende landen en jaren.</p>
<p><strong>Data laden en opschonen</strong></p>
<p>Voor deze opdracht zijn er verschillende datasets geladen; “flu_data.csv”, “dengue_data.csv” en “gapminder” uit het {dslabs} pakket. Deze datasets zijn in losse dataframes geladen en tidy gemaakt.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="opdracht-7-relationele-data-en-databases.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inlezen van de flu data</span></span>
<span id="cb1-2"><a href="opdracht-7-relationele-data-en-databases.html#cb1-2" aria-hidden="true" tabindex="-1"></a>flu_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/flu_data_portfolio_opdracht_7.csv&quot;</span>)</span>
<span id="cb1-3"><a href="opdracht-7-relationele-data-en-databases.html#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="opdracht-7-relationele-data-en-databases.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tidy maken van de flu data</span></span>
<span id="cb1-5"><a href="opdracht-7-relationele-data-en-databases.html#cb1-5" aria-hidden="true" tabindex="-1"></a>flu_data_tidy <span class="ot">&lt;-</span> flu_data <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="opdracht-7-relationele-data-en-databases.html#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Australia&quot;</span>, <span class="st">&quot;Austria&quot;</span>, <span class="st">&quot;Belgium&quot;</span>, <span class="st">&quot;Bolivia&quot;</span>, <span class="st">&quot;Brazil&quot;</span>, <span class="st">&quot;Bulgaria&quot;</span>, <span class="st">&quot;Canada&quot;</span>, <span class="st">&quot;Chile&quot;</span>, <span class="st">&quot;France&quot;</span>, <span class="st">&quot;Germany&quot;</span>, <span class="st">&quot;Hungary&quot;</span>, <span class="st">&quot;Japan&quot;</span>, <span class="st">&quot;Mexico&quot;</span>, <span class="st">&quot;Netherlands&quot;</span>, <span class="st">&quot;New.Zealand&quot;</span>, <span class="st">&quot;Norway&quot;</span>, <span class="st">&quot;Paraguay&quot;</span>, <span class="st">&quot;Peru&quot;</span>, <span class="st">&quot;Poland&quot;</span>, <span class="st">&quot;Romania&quot;</span>, <span class="st">&quot;Russia&quot;</span>, <span class="st">&quot;South.Africa&quot;</span>, <span class="st">&quot;Spain&quot;</span>, <span class="st">&quot;Sweden&quot;</span>, <span class="st">&quot;Switzerland&quot;</span>, <span class="st">&quot;Ukraine&quot;</span>, <span class="st">&quot;United.States&quot;</span>, <span class="st">&quot;Uruguay&quot;</span>), </span>
<span id="cb1-7"><a href="opdracht-7-relationele-data-en-databases.html#cb1-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>,</span>
<span id="cb1-8"><a href="opdracht-7-relationele-data-en-databases.html#cb1-8" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb1-9"><a href="opdracht-7-relationele-data-en-databases.html#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="opdracht-7-relationele-data-en-databases.html#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># maak er een dataframe van</span></span>
<span id="cb1-11"><a href="opdracht-7-relationele-data-en-databases.html#cb1-11" aria-hidden="true" tabindex="-1"></a>flu_data_tidy_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(flu_data_tidy)</span>
<span id="cb1-12"><a href="opdracht-7-relationele-data-en-databases.html#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="opdracht-7-relationele-data-en-databases.html#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="opdracht-7-relationele-data-en-databases.html#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># inlezen van de dengue data</span></span>
<span id="cb1-15"><a href="opdracht-7-relationele-data-en-databases.html#cb1-15" aria-hidden="true" tabindex="-1"></a>dengue_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/dengue_data_portfolio_opdracht_7.csv&quot;</span>)</span>
<span id="cb1-16"><a href="opdracht-7-relationele-data-en-databases.html#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="opdracht-7-relationele-data-en-databases.html#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co"># tidy maken can de dengue data</span></span>
<span id="cb1-18"><a href="opdracht-7-relationele-data-en-databases.html#cb1-18" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy <span class="ot">&lt;-</span> dengue_data <span class="sc">%&gt;%</span></span>
<span id="cb1-19"><a href="opdracht-7-relationele-data-en-databases.html#cb1-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&quot;Argentina&quot;</span>, <span class="st">&quot;Bolivia&quot;</span>, <span class="st">&quot;Brazil&quot;</span>, <span class="st">&quot;India&quot;</span>, <span class="st">&quot;Indonesia&quot;</span>, <span class="st">&quot;Mexico&quot;</span>, <span class="st">&quot;Philippines&quot;</span>, <span class="st">&quot;Singapore&quot;</span>, <span class="st">&quot;Thailand&quot;</span>, <span class="st">&quot;Venezuela&quot;</span>), </span>
<span id="cb1-20"><a href="opdracht-7-relationele-data-en-databases.html#cb1-20" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>,</span>
<span id="cb1-21"><a href="opdracht-7-relationele-data-en-databases.html#cb1-21" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb1-22"><a href="opdracht-7-relationele-data-en-databases.html#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="opdracht-7-relationele-data-en-databases.html#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># maak er een dataframe van </span></span>
<span id="cb1-24"><a href="opdracht-7-relationele-data-en-databases.html#cb1-24" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(dengue_data_tidy)</span>
<span id="cb1-25"><a href="opdracht-7-relationele-data-en-databases.html#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="opdracht-7-relationele-data-en-databases.html#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="opdracht-7-relationele-data-en-databases.html#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># inlezen van de gapminder data</span></span>
<span id="cb1-28"><a href="opdracht-7-relationele-data-en-databases.html#cb1-28" aria-hidden="true" tabindex="-1"></a>gapminder_data <span class="ot">&lt;-</span> dslabs<span class="sc">::</span>gapminder</span>
<span id="cb1-29"><a href="opdracht-7-relationele-data-en-databases.html#cb1-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-30"><a href="opdracht-7-relationele-data-en-databases.html#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="co"># maak er een dataframe van</span></span>
<span id="cb1-31"><a href="opdracht-7-relationele-data-en-databases.html#cb1-31" aria-hidden="true" tabindex="-1"></a>gapminder_data_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(gapminder_data)</span></code></pre></div>
<p>Vervolgens zijn de klassen gecontrolleerd op dat ze wel echt dataframes zijn aan de hand van de volgende code.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="opdracht-7-relationele-data-en-databases.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># onderzoeken wat de classes zijn</span></span>
<span id="cb2-2"><a href="opdracht-7-relationele-data-en-databases.html#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(flu_data_tidy_df)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="opdracht-7-relationele-data-en-databases.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(dengue_data_tidy_df)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="opdracht-7-relationele-data-en-databases.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(gapminder_data_df)</span></code></pre></div>
<pre><code>## [1] &quot;data.frame&quot;</code></pre>
<p>Hieruit is geconcludeerd dat alle klassen overeen komen met elkaar, vervolgens is er onderzocht of de gegevenstypen ook overeen komen met elkaar, om zo nodig aan te kunnen passen.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="opdracht-7-relationele-data-en-databases.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#uitzoeken of de gegevenstypen over een komen</span></span>
<span id="cb8-2"><a href="opdracht-7-relationele-data-en-databases.html#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(flu_data_tidy_df[<span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;Date&quot;</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    19111 obs. of  2 variables:
##  $ country: chr  &quot;Argentina&quot; &quot;Australia&quot; &quot;Austria&quot; &quot;Belgium&quot; ...
##  $ Date   : chr  &quot;2002-12-29&quot; &quot;2002-12-29&quot; &quot;2002-12-29&quot; &quot;2002-12-29&quot; ...</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="opdracht-7-relationele-data-en-databases.html#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dengue_data_tidy_df[<span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;Date&quot;</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    6590 obs. of  2 variables:
##  $ country: chr  &quot;Argentina&quot; &quot;Bolivia&quot; &quot;Brazil&quot; &quot;India&quot; ...
##  $ Date   : chr  &quot;2002-12-29&quot; &quot;2002-12-29&quot; &quot;2002-12-29&quot; &quot;2002-12-29&quot; ...</code></pre>
<p>De gegevenstypen komen overeen, maar in de gapminder data is de “Date” geen datum, maar alleen een jaar in de kolom “Year”. om dit op te lossen wordt er aan de flu en dengue data een extra kolom met “year” toegevoegd.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="opdracht-7-relationele-data-en-databases.html#cb12-1" aria-hidden="true" tabindex="-1"></a>flu_data_tidy_df_2 <span class="ot">&lt;-</span> flu_data_tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="opdracht-7-relationele-data-en-databases.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(<span class="fu">ymd</span>(Date)))</span>
<span id="cb12-3"><a href="opdracht-7-relationele-data-en-databases.html#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="opdracht-7-relationele-data-en-databases.html#cb12-4" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy_df_2 <span class="ot">&lt;-</span> dengue_data_tidy_df <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="opdracht-7-relationele-data-en-databases.html#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(<span class="fu">ymd</span>(Date)))</span>
<span id="cb12-6"><a href="opdracht-7-relationele-data-en-databases.html#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="opdracht-7-relationele-data-en-databases.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co"># nogmaals checken of de gegevenstypen overeen komen </span></span>
<span id="cb12-8"><a href="opdracht-7-relationele-data-en-databases.html#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(flu_data_tidy_df_2[<span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    19111 obs. of  2 variables:
##  $ country: chr  &quot;Argentina&quot; &quot;Australia&quot; &quot;Austria&quot; &quot;Belgium&quot; ...
##  $ year   : num  2002 2002 2002 2002 2002 ...</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="opdracht-7-relationele-data-en-databases.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dengue_data_tidy_df_2[<span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    6590 obs. of  2 variables:
##  $ country: chr  &quot;Argentina&quot; &quot;Bolivia&quot; &quot;Brazil&quot; &quot;India&quot; ...
##  $ year   : num  2002 2002 2002 2002 2002 ...</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="opdracht-7-relationele-data-en-databases.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gapminder_data_df[<span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10545 obs. of  2 variables:
##  $ country: Factor w/ 185 levels &quot;Albania&quot;,&quot;Algeria&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ year   : int  1960 1960 1960 1960 1960 1960 1960 1960 1960 1960 ...</code></pre>
<p>Hieruit blijkt dat de gegevenstypen niet overeen komen. De kolommen “country” en “year”zijn in de gapminder dataframe van de gegevenstypes “Factor with leves” en “integer”, deze zijn in de flue en dengue data van de gegevenstypes “character” en “number”. dit is opgelost aan de hand van de onderstaande code.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="opdracht-7-relationele-data-en-databases.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># gegevenstypen aanpassen</span></span>
<span id="cb18-2"><a href="opdracht-7-relationele-data-en-databases.html#cb18-2" aria-hidden="true" tabindex="-1"></a>flu_data_tidy_df_2<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(flu_data_tidy_df_2<span class="sc">$</span>country)</span>
<span id="cb18-3"><a href="opdracht-7-relationele-data-en-databases.html#cb18-3" aria-hidden="true" tabindex="-1"></a>flu_data_tidy_df_2<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(flu_data_tidy_df_2<span class="sc">$</span>year)</span>
<span id="cb18-4"><a href="opdracht-7-relationele-data-en-databases.html#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="opdracht-7-relationele-data-en-databases.html#cb18-5" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy_df_2<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dengue_data_tidy_df_2<span class="sc">$</span>country)</span>
<span id="cb18-6"><a href="opdracht-7-relationele-data-en-databases.html#cb18-6" aria-hidden="true" tabindex="-1"></a>dengue_data_tidy_df_2<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dengue_data_tidy_df_2<span class="sc">$</span>year)</span>
<span id="cb18-7"><a href="opdracht-7-relationele-data-en-databases.html#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="opdracht-7-relationele-data-en-databases.html#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># nogmaals gegevenstypen nakijken</span></span>
<span id="cb18-9"><a href="opdracht-7-relationele-data-en-databases.html#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(flu_data_tidy_df_2[<span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    19111 obs. of  2 variables:
##  $ country: Factor w/ 29 levels &quot;Argentina&quot;,&quot;Australia&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ year   : int  2002 2002 2002 2002 2002 2002 2002 2002 2002 2002 ...</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="opdracht-7-relationele-data-en-databases.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(dengue_data_tidy_df_2[<span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    6590 obs. of  2 variables:
##  $ country: Factor w/ 10 levels &quot;Argentina&quot;,&quot;Bolivia&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ year   : int  2002 2002 2002 2002 2002 2002 2002 2002 2002 2002 ...</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="opdracht-7-relationele-data-en-databases.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(gapminder_data_df[<span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>)])</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    10545 obs. of  2 variables:
##  $ country: Factor w/ 185 levels &quot;Albania&quot;,&quot;Algeria&quot;,..: 1 2 3 4 5 6 7 8 9 10 ...
##  $ year   : int  1960 1960 1960 1960 1960 1960 1960 1960 1960 1960 ...</code></pre>
<p>Nu de gegevenstypen overeen komen kunnen de dataframes opgeslagen worden als .csv en .rds bestanden. deze worden opgeslagen naar de map “data”</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="opdracht-7-relationele-data-en-databases.html#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pad naar de map toevoegen (om typfouten te voorkomen)</span></span>
<span id="cb24-2"><a href="opdracht-7-relationele-data-en-databases.html#cb24-2" aria-hidden="true" tabindex="-1"></a>mapnaam <span class="ot">&lt;-</span> <span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/&quot;</span></span>
<span id="cb24-3"><a href="opdracht-7-relationele-data-en-databases.html#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="opdracht-7-relationele-data-en-databases.html#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframes opslaan als .csv</span></span>
<span id="cb24-5"><a href="opdracht-7-relationele-data-en-databases.html#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(flu_data_tidy_df_2, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;flu_data_tidy.csv&quot;</span>))</span>
<span id="cb24-6"><a href="opdracht-7-relationele-data-en-databases.html#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(dengue_data_tidy_df_2, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;dengue_data_tidy.csv&quot;</span>))</span>
<span id="cb24-7"><a href="opdracht-7-relationele-data-en-databases.html#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(gapminder_data_df, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;gapminder_data_tidy.csv&quot;</span>))</span>
<span id="cb24-8"><a href="opdracht-7-relationele-data-en-databases.html#cb24-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-9"><a href="opdracht-7-relationele-data-en-databases.html#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframes opslaan als .rds</span></span>
<span id="cb24-10"><a href="opdracht-7-relationele-data-en-databases.html#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(flu_data_tidy_df_2, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;flu_data_tidy.rds&quot;</span>))</span>
<span id="cb24-11"><a href="opdracht-7-relationele-data-en-databases.html#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(dengue_data_tidy_df_2, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;dengue_data_tidy.rds&quot;</span>))</span>
<span id="cb24-12"><a href="opdracht-7-relationele-data-en-databases.html#cb24-12" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(gapminder_data_df, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;gapminder_data_tidy.rds&quot;</span>))</span></code></pre></div>
<p><strong>Database creatie en gegevens importeren</strong></p>
<p>Om de verkregen gegevens in te kunnen laden naar een database moet de PostgreSQL database eerst gemaakt worden, dit is gedaan aan de hand van dbeaver. de gemaak</p>
<p>nadat de database genaamd “workflowsdb aangemaakt is moest er een connectie aangemaakt worden.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="opdracht-7-relationele-data-en-databases.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#verbinding maken met database</span></span>
<span id="cb25-2"><a href="opdracht-7-relationele-data-en-databases.html#cb25-2" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(),</span>
<span id="cb25-3"><a href="opdracht-7-relationele-data-en-databases.html#cb25-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">host =</span> <span class="st">&quot;localhost&quot;</span>,</span>
<span id="cb25-4"><a href="opdracht-7-relationele-data-en-databases.html#cb25-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">port =</span> <span class="dv">5432</span>,</span>
<span id="cb25-5"><a href="opdracht-7-relationele-data-en-databases.html#cb25-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>,</span>
<span id="cb25-6"><a href="opdracht-7-relationele-data-en-databases.html#cb25-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">user =</span> <span class="st">&quot;postgres&quot;</span>,</span>
<span id="cb25-7"><a href="opdracht-7-relationele-data-en-databases.html#cb25-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">password =</span> <span class="st">&quot;Muis1234&quot;</span>)</span></code></pre></div>
<p>Nu de connectie bestaat kunnen de tabellen ingevoegd worden in de database.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="opdracht-7-relationele-data-en-databases.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">#tabellen maken en invoegen CSV</span></span>
<span id="cb26-2"><a href="opdracht-7-relationele-data-en-databases.html#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu_data_csv&quot;</span>, <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/flu_data_tidy.csv&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-3"><a href="opdracht-7-relationele-data-en-databases.html#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue_data_csv&quot;</span>, <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/dengue_data_tidy.csv&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-4"><a href="opdracht-7-relationele-data-en-databases.html#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder_data_csv&quot;</span>, <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/gapminder_data_tidy.csv&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-5"><a href="opdracht-7-relationele-data-en-databases.html#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="opdracht-7-relationele-data-en-databases.html#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="opdracht-7-relationele-data-en-databases.html#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co">#tabellen maken en invoegen RDS</span></span>
<span id="cb26-8"><a href="opdracht-7-relationele-data-en-databases.html#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;flu_data_rds&quot;</span>, <span class="fu">readRDS</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/flu_data_tidy.rds&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-9"><a href="opdracht-7-relationele-data-en-databases.html#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengue_data_rds&quot;</span>, <span class="fu">readRDS</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/dengue_data_tidy.rds&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb26-10"><a href="opdracht-7-relationele-data-en-databases.html#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder_data_rds&quot;</span>, <span class="fu">readRDS</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/gapminder_data_tidy.rds&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>De tabellen zijn nu ingeladen in dbever. De volgende stap is om de inhoud van de tabellen in dbever te inspecteren aan de hand van SQL. De code in de chunk hieronder is niet gerund, deze is in dbeaver gerund. het gevormde sql file is te vinden in mijn <a href="https://github.com/nonnehodes01/Datascience2_portfolio/tree/main/portfolio_opdracht_7">Github</a> repository met als bestandsnaam “data_inspecteren.sql”.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb27-1"><a href="opdracht-7-relationele-data-en-databases.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inspecteer de inhoud van de flu_data_csv-tabel</span></span>
<span id="cb27-2"><a href="opdracht-7-relationele-data-en-databases.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> flu_data_csv;</span>
<span id="cb27-3"><a href="opdracht-7-relationele-data-en-databases.html#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="opdracht-7-relationele-data-en-databases.html#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inspecteer de inhoud van de dengue_data_csv-tabel</span></span>
<span id="cb27-5"><a href="opdracht-7-relationele-data-en-databases.html#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> dengue_data_csv;</span>
<span id="cb27-6"><a href="opdracht-7-relationele-data-en-databases.html#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="opdracht-7-relationele-data-en-databases.html#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inspecteer de inhoud van de gapminder_data_csv-tabel</span></span>
<span id="cb27-8"><a href="opdracht-7-relationele-data-en-databases.html#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> gapminder_data_csv;</span>
<span id="cb27-9"><a href="opdracht-7-relationele-data-en-databases.html#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="opdracht-7-relationele-data-en-databases.html#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inspecteer de inhoud van de flu_data_rds-tabel</span></span>
<span id="cb27-11"><a href="opdracht-7-relationele-data-en-databases.html#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> flu_data_rds;</span>
<span id="cb27-12"><a href="opdracht-7-relationele-data-en-databases.html#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="opdracht-7-relationele-data-en-databases.html#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inspecteer de inhoud van de dengue_data_rds-tabel</span></span>
<span id="cb27-14"><a href="opdracht-7-relationele-data-en-databases.html#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> dengue_data_rds;</span>
<span id="cb27-15"><a href="opdracht-7-relationele-data-en-databases.html#cb27-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-16"><a href="opdracht-7-relationele-data-en-databases.html#cb27-16" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inspecteer de inhoud van de gapminder_data_rds-tabel</span></span>
<span id="cb27-17"><a href="opdracht-7-relationele-data-en-databases.html#cb27-17" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span> <span class="kw">FROM</span> gapminder_data_rds;</span></code></pre></div>
<p>De tabellen zin ook geïnspecteerd met R aan de hand van dplyr.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="opdracht-7-relationele-data-en-databases.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inlezen van de data</span></span>
<span id="cb28-2"><a href="opdracht-7-relationele-data-en-databases.html#cb28-2" aria-hidden="true" tabindex="-1"></a>flu_data_csv <span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/flu_data_tidy.csv&quot;</span>)</span>
<span id="cb28-3"><a href="opdracht-7-relationele-data-en-databases.html#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="opdracht-7-relationele-data-en-databases.html#cb28-4" aria-hidden="true" tabindex="-1"></a>dengue_data_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/dengue_data_tidy.csv&quot;</span>)</span>
<span id="cb28-5"><a href="opdracht-7-relationele-data-en-databases.html#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="opdracht-7-relationele-data-en-databases.html#cb28-6" aria-hidden="true" tabindex="-1"></a>gapminder_data_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/gapminder_data_tidy.csv&quot;</span>)</span>
<span id="cb28-7"><a href="opdracht-7-relationele-data-en-databases.html#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="opdracht-7-relationele-data-en-databases.html#cb28-8" aria-hidden="true" tabindex="-1"></a>flu_data_rds <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/flu_data_tidy.rds&quot;</span>)</span>
<span id="cb28-9"><a href="opdracht-7-relationele-data-en-databases.html#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="opdracht-7-relationele-data-en-databases.html#cb28-10" aria-hidden="true" tabindex="-1"></a>dengue_data_rds <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/dengue_data_tidy.rds&quot;</span>)</span>
<span id="cb28-11"><a href="opdracht-7-relationele-data-en-databases.html#cb28-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-12"><a href="opdracht-7-relationele-data-en-databases.html#cb28-12" aria-hidden="true" tabindex="-1"></a>gapminder_data_rds <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/gapminder_data_tidy.rds&quot;</span>)</span>
<span id="cb28-13"><a href="opdracht-7-relationele-data-en-databases.html#cb28-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-14"><a href="opdracht-7-relationele-data-en-databases.html#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="opdracht-7-relationele-data-en-databases.html#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="co"># inspecteer de inhoud van de tabellen</span></span>
<span id="cb28-16"><a href="opdracht-7-relationele-data-en-databases.html#cb28-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-17"><a href="opdracht-7-relationele-data-en-databases.html#cb28-17" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_data_csv)</span></code></pre></div>
<pre><code>##   X       Date   country value year
## 1 1 2002-12-29 Argentina    NA 2002
## 2 2 2002-12-29 Australia    NA 2002
## 3 3 2002-12-29   Austria    NA 2002
## 4 4 2002-12-29   Belgium    NA 2002
## 5 5 2002-12-29   Bolivia    NA 2002
## 6 6 2002-12-29    Brazil   174 2002</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="opdracht-7-relationele-data-en-databases.html#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_data_csv)</span></code></pre></div>
<pre><code>##   X       Date   country value year
## 1 1 2002-12-29 Argentina    NA 2002
## 2 2 2002-12-29   Bolivia 0.101 2002
## 3 3 2002-12-29    Brazil 0.073 2002
## 4 4 2002-12-29     India 0.062 2002
## 5 5 2002-12-29 Indonesia 0.101 2002
## 6 6 2002-12-29    Mexico    NA 2002</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="opdracht-7-relationele-data-en-databases.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_data_csv)</span></code></pre></div>
<pre><code>##   X             country year infant_mortality life_expectancy fertility
## 1 1             Albania 1960           115.40           62.87      6.19
## 2 2             Algeria 1960           148.20           47.50      7.65
## 3 3              Angola 1960           208.00           35.98      7.32
## 4 4 Antigua and Barbuda 1960               NA           62.97      4.43
## 5 5           Argentina 1960            59.87           65.39      3.11
## 6 6             Armenia 1960               NA           66.86      4.55
##   population          gdp continent          region
## 1    1636054           NA    Europe Southern Europe
## 2   11124892  13828152297    Africa Northern Africa
## 3    5270844           NA    Africa   Middle Africa
## 4      54681           NA  Americas       Caribbean
## 5   20619075 108322326649  Americas   South America
## 6    1867396           NA      Asia    Western Asia</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="opdracht-7-relationele-data-en-databases.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu_data_rds)</span></code></pre></div>
<pre><code>##         Date   country value year
## 1 2002-12-29 Argentina    NA 2002
## 2 2002-12-29 Australia    NA 2002
## 3 2002-12-29   Austria    NA 2002
## 4 2002-12-29   Belgium    NA 2002
## 5 2002-12-29   Bolivia    NA 2002
## 6 2002-12-29    Brazil   174 2002</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="opdracht-7-relationele-data-en-databases.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue_data_rds)</span></code></pre></div>
<pre><code>##         Date   country value year
## 1 2002-12-29 Argentina    NA 2002
## 2 2002-12-29   Bolivia 0.101 2002
## 3 2002-12-29    Brazil 0.073 2002
## 4 2002-12-29     India 0.062 2002
## 5 2002-12-29 Indonesia 0.101 2002
## 6 2002-12-29    Mexico    NA 2002</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="opdracht-7-relationele-data-en-databases.html#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder_data_rds)</span></code></pre></div>
<pre><code>##               country year infant_mortality life_expectancy fertility
## 1             Albania 1960           115.40           62.87      6.19
## 2             Algeria 1960           148.20           47.50      7.65
## 3              Angola 1960           208.00           35.98      7.32
## 4 Antigua and Barbuda 1960               NA           62.97      4.43
## 5           Argentina 1960            59.87           65.39      3.11
## 6             Armenia 1960               NA           66.86      4.55
##   population          gdp continent          region
## 1    1636054           NA    Europe Southern Europe
## 2   11124892  13828152297    Africa Northern Africa
## 3    5270844           NA    Africa   Middle Africa
## 4      54681           NA  Americas       Caribbean
## 5   20619075 108322326649  Americas   South America
## 6    1867396           NA      Asia    Western Asia</code></pre>
<p>Nadat de gegevens geïnspecteerd zijn moeten de gegevens van de gapminder toegevoegd worden aan de dengue en flu.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="opdracht-7-relationele-data-en-databases.html#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Samenvoegen van gapminder_data_df met flu_data_tidy_df_2 op basis van country en year</span></span>
<span id="cb40-2"><a href="opdracht-7-relationele-data-en-databases.html#cb40-2" aria-hidden="true" tabindex="-1"></a>merged_flu <span class="ot">&lt;-</span> <span class="fu">left_join</span>(flu_data_tidy_df_2, gapminder_data_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>))</span>
<span id="cb40-3"><a href="opdracht-7-relationele-data-en-databases.html#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="opdracht-7-relationele-data-en-databases.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Samenvoegen van gapminder_data_df met dengue_data_tidy_df_2 op basis van country en year</span></span>
<span id="cb40-5"><a href="opdracht-7-relationele-data-en-databases.html#cb40-5" aria-hidden="true" tabindex="-1"></a>merged_dengue <span class="ot">&lt;-</span> <span class="fu">left_join</span>(dengue_data_tidy_df_2, gapminder_data_df, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year&quot;</span>))</span></code></pre></div>
<p>Deze schone gegevens moeten vervolgens bewaard worden in de workflowsdb database.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="opdracht-7-relationele-data-en-databases.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframes opslaan als .csv</span></span>
<span id="cb41-2"><a href="opdracht-7-relationele-data-en-databases.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(merged_flu, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;merged_flu.csv&quot;</span>))</span>
<span id="cb41-3"><a href="opdracht-7-relationele-data-en-databases.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(merged_dengue, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;merged_dengue.csv&quot;</span>))</span>
<span id="cb41-4"><a href="opdracht-7-relationele-data-en-databases.html#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="opdracht-7-relationele-data-en-databases.html#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co"># dataframes opslaan als .rds</span></span>
<span id="cb41-6"><a href="opdracht-7-relationele-data-en-databases.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(merged_flu, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;merged_flu.rds&quot;</span>))</span>
<span id="cb41-7"><a href="opdracht-7-relationele-data-en-databases.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(merged_dengue, <span class="at">file =</span> <span class="fu">paste0</span>(mapnaam, <span class="st">&quot;merged_dengue.rds&quot;</span>))</span>
<span id="cb41-8"><a href="opdracht-7-relationele-data-en-databases.html#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="opdracht-7-relationele-data-en-databases.html#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="opdracht-7-relationele-data-en-databases.html#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co">#tabellen maken en invoegen CSV</span></span>
<span id="cb41-11"><a href="opdracht-7-relationele-data-en-databases.html#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;merged_flu_csv&quot;</span>, <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/merged_flu.csv&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-12"><a href="opdracht-7-relationele-data-en-databases.html#cb41-12" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;merged_dengue_csv&quot;</span>, <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/merged_dengue.csv&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-13"><a href="opdracht-7-relationele-data-en-databases.html#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="opdracht-7-relationele-data-en-databases.html#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co">#tabellen maken en invoegen RDS</span></span>
<span id="cb41-15"><a href="opdracht-7-relationele-data-en-databases.html#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;merged_flu_rds&quot;</span>, <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/merged_flu.rds&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb41-16"><a href="opdracht-7-relationele-data-en-databases.html#cb41-16" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;merged_dengue_rds&quot;</span>, <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/merged_dengue.rds&quot;</span>), <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Aan de hand van de schone gegevens is een merged tabel gemaakt aan de hand van de volgende code. De code in de chunk hieronder is niet gerund, deze is in dbeaver gerund. het gevormde sql file is te vinden in mijn <a href="https://github.com/nonnehodes01/Datascience2_portfolio/tree/main/portfolio_opdracht_7">Github</a> repository met als bestandsnaam; “merge_data.sql”.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb42-1"><a href="opdracht-7-relationele-data-en-databases.html#cb42-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-2"><a href="opdracht-7-relationele-data-en-databases.html#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="co">--- Merge rds data</span></span>
<span id="cb42-3"><a href="opdracht-7-relationele-data-en-databases.html#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb42-4"><a href="opdracht-7-relationele-data-en-databases.html#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="kw">INTO</span> merged_rds</span>
<span id="cb42-5"><a href="opdracht-7-relationele-data-en-databases.html#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> merged_flu_rds</span>
<span id="cb42-6"><a href="opdracht-7-relationele-data-en-databases.html#cb42-6" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span> <span class="kw">ALL</span></span>
<span id="cb42-7"><a href="opdracht-7-relationele-data-en-databases.html#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb42-8"><a href="opdracht-7-relationele-data-en-databases.html#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> merged_dengue_rds;</span>
<span id="cb42-9"><a href="opdracht-7-relationele-data-en-databases.html#cb42-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-10"><a href="opdracht-7-relationele-data-en-databases.html#cb42-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-11"><a href="opdracht-7-relationele-data-en-databases.html#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="co">--- Merge csv data</span></span>
<span id="cb42-12"><a href="opdracht-7-relationele-data-en-databases.html#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb42-13"><a href="opdracht-7-relationele-data-en-databases.html#cb42-13" aria-hidden="true" tabindex="-1"></a><span class="kw">INTO</span> merged_csv</span>
<span id="cb42-14"><a href="opdracht-7-relationele-data-en-databases.html#cb42-14" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> merged_flu_csv</span>
<span id="cb42-15"><a href="opdracht-7-relationele-data-en-databases.html#cb42-15" aria-hidden="true" tabindex="-1"></a><span class="kw">UNION</span> <span class="kw">ALL</span></span>
<span id="cb42-16"><a href="opdracht-7-relationele-data-en-databases.html#cb42-16" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span></span>
<span id="cb42-17"><a href="opdracht-7-relationele-data-en-databases.html#cb42-17" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> merged_dengue_csv;</span></code></pre></div>
<p>Deze data is gëexporteerd naar de “data” map en heet “merged_csv_202306051720.csv” deze kan nu worden ingelezen in R om statistische tests mee te doen.</p>
<p><strong>Beschrijvende statistieken en visualisaties</strong></p>
<p>Mer de gekoppelde tabel kunnen er verschillende beschrijvende statistieken weergeven worden om inzicht te krijgen in de gegevens. dit is als volgt gedaan.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="opdracht-7-relationele-data-en-databases.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># inlezen van de data</span></span>
<span id="cb43-2"><a href="opdracht-7-relationele-data-en-databases.html#cb43-2" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;~/HU_ILC_DS2/Datascience2_portfolio/data/merged_csv_202306051720.csv&quot;</span>)</span>
<span id="cb43-3"><a href="opdracht-7-relationele-data-en-databases.html#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="opdracht-7-relationele-data-en-databases.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># toon beschrijvende statistieken</span></span>
<span id="cb43-5"><a href="opdracht-7-relationele-data-en-databases.html#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(merged_data)</span></code></pre></div>
<pre><code>##        X             Date             country              value          
##  Min.   :    1   Length:25701       Length:25701       Min.   :    0.000  
##  1st Qu.: 3213   Class :character   Class :character   1st Qu.:    0.361  
##  Median : 6426   Mode  :character   Mode  :character   Median :   63.000  
##  Mean   : 7951                                         Mean   :  347.673  
##  3rd Qu.:12686                                         3rd Qu.:  373.000  
##  Max.   :19111                                         Max.   :10555.000  
##                                                        NA&#39;s   :2172       
##       year      infant_mortality life_expectancy   fertility    
##  Min.   :2002   Min.   : 2.00    Min.   :62.30   Min.   :1.150  
##  1st Qu.:2006   1st Qu.: 4.00    1st Qu.:73.20   1st Qu.:1.440  
##  Median :2009   Median :10.90    Median :75.60   Median :1.850  
##  Mean   :2009   Mean   :12.92    Mean   :76.06   Mean   :1.981  
##  3rd Qu.:2012   3rd Qu.:16.20    3rd Qu.:80.40   3rd Qu.:2.310  
##  Max.   :2015   Max.   :62.00    Max.   :83.20   Max.   :3.980  
##                 NA&#39;s   :1977     NA&#39;s   :1977    NA&#39;s   :1977   
##    population             gdp             continent            region         
##  Min.   :3.324e+06   Min.   :7.214e+09   Length:25701       Length:25701      
##  1st Qu.:9.759e+06   1st Qu.:8.755e+10   Class :character   Class :character  
##  Median :3.138e+07   Median :2.534e+11   Mode  :character   Mode  :character  
##  Mean   :8.652e+07   Mean   :5.144e+11                                        
##  3rd Qu.:8.160e+07   3rd Qu.:6.371e+11                                        
##  Max.   :1.311e+09   Max.   :5.218e+12                                        
##  NA&#39;s   :1977        NA&#39;s   :8781</code></pre>
<p>Daarnaast zijn er verschillende visualisaties gedaan, er is een bar plot gemaakt over infant mortality in de verschillende regios in 2005, er is een scatter/line plot gemaakt over de gemiddelde infant mortality per jaar per regio en er is een bar plot gemaakt bij de gemiddelde levensverwachting per regio. de resultaten hiervan zijn hieronder terug te zien.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="opdracht-7-relationele-data-en-databases.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># infant mortality geplot tegen de regio in het jaar 2005</span></span>
<span id="cb45-2"><a href="opdracht-7-relationele-data-en-databases.html#cb45-2" aria-hidden="true" tabindex="-1"></a>filtered_data <span class="ot">&lt;-</span> <span class="fu">subset</span>(merged_data, year <span class="sc">==</span> <span class="dv">2005</span>)</span>
<span id="cb45-3"><a href="opdracht-7-relationele-data-en-databases.html#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="opdracht-7-relationele-data-en-databases.html#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> filtered_data, <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> infant_mortality, <span class="at">fill =</span> region)) <span class="sc">+</span></span>
<span id="cb45-5"><a href="opdracht-7-relationele-data-en-databases.html#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-6"><a href="opdracht-7-relationele-data-en-databases.html#cb45-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Region&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-7"><a href="opdracht-7-relationele-data-en-databases.html#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Infant Mortality&quot;</span>) <span class="sc">+</span></span>
<span id="cb45-8"><a href="opdracht-7-relationele-data-en-databases.html#cb45-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Infant Mortality per regio in 2005&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/visualisatie-1.png" width="672" /></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="opdracht-7-relationele-data-en-databases.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># infant mortality per regio </span></span>
<span id="cb46-2"><a href="opdracht-7-relationele-data-en-databases.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Groepeer de dataset op jaar en regio en bereken het gemiddelde van infant mortality</span></span>
<span id="cb46-3"><a href="opdracht-7-relationele-data-en-databases.html#cb46-3" aria-hidden="true" tabindex="-1"></a>average_infant_mortality <span class="ot">&lt;-</span> merged_data <span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="opdracht-7-relationele-data-en-databases.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, region) <span class="sc">%&gt;%</span></span>
<span id="cb46-5"><a href="opdracht-7-relationele-data-en-databases.html#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_infant_mortality =</span> <span class="fu">mean</span>(infant_mortality))</span>
<span id="cb46-6"><a href="opdracht-7-relationele-data-en-databases.html#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="opdracht-7-relationele-data-en-databases.html#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot de gemiddelde infant mortality per jaar per regio</span></span>
<span id="cb46-8"><a href="opdracht-7-relationele-data-en-databases.html#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> average_infant_mortality, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> mean_infant_mortality, <span class="at">color =</span> region)) <span class="sc">+</span></span>
<span id="cb46-9"><a href="opdracht-7-relationele-data-en-databases.html#cb46-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb46-10"><a href="opdracht-7-relationele-data-en-databases.html#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb46-11"><a href="opdracht-7-relationele-data-en-databases.html#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Gemiddelde Infant Mortality per jaar per regio&quot;</span>,</span>
<span id="cb46-12"><a href="opdracht-7-relationele-data-en-databases.html#cb46-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">&quot;Year&quot;</span>,</span>
<span id="cb46-13"><a href="opdracht-7-relationele-data-en-databases.html#cb46-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&quot;Gemiddelde Infant Mortality&quot;</span>) <span class="sc">+</span></span>
<span id="cb46-14"><a href="opdracht-7-relationele-data-en-databases.html#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/visualisatie-2.png" width="672" /></p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="opdracht-7-relationele-data-en-databases.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bereken het gemiddelde van life_expectancy per region</span></span>
<span id="cb47-2"><a href="opdracht-7-relationele-data-en-databases.html#cb47-2" aria-hidden="true" tabindex="-1"></a>mean_life_expectancy <span class="ot">&lt;-</span> <span class="fu">aggregate</span>(life_expectancy <span class="sc">~</span> region, <span class="at">data =</span> merged_data, <span class="at">FUN =</span> mean)</span>
<span id="cb47-3"><a href="opdracht-7-relationele-data-en-databases.html#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="opdracht-7-relationele-data-en-databases.html#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># maak  barplot</span></span>
<span id="cb47-5"><a href="opdracht-7-relationele-data-en-databases.html#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mean_life_expectancy, <span class="fu">aes</span>(<span class="at">x =</span> region, <span class="at">y =</span> life_expectancy, <span class="at">fill =</span> region)) <span class="sc">+</span></span>
<span id="cb47-6"><a href="opdracht-7-relationele-data-en-databases.html#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb47-7"><a href="opdracht-7-relationele-data-en-databases.html#cb47-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Region&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Mean Life Expectancy&quot;</span>) <span class="sc">+</span></span>
<span id="cb47-8"><a href="opdracht-7-relationele-data-en-databases.html#cb47-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Gemiddelde Levensverwachting per Regio&quot;</span>) <span class="sc">+</span></span>
<span id="cb47-9"><a href="opdracht-7-relationele-data-en-databases.html#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/visualisatie-3.png" width="672" /></p>
<p><strong>Conclusie</strong></p>
<p>Deze opdracht weergeeft mijn vaardigheden op het gebied van gegevensanalyse en visualisatie met behulp van R en SQL. Ik heb ervaring opgedaan met het opschonen en combineren van gegevens, het uitvoeren van analyses met SQL en dplyr, en het creëren van informatieve visualisaties.</p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="opdracht-6-output-pages.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="opdracht-8-een-r-package-bouwen.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
